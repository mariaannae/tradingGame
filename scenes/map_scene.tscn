[gd_scene load_steps=14 format=3 uid="uid://bp408kebckug"]

[ext_resource type="Texture2D" uid="uid://o4fb4xays43t" path="res://icon.svg" id="1_0wcw4"]
[ext_resource type="Script" uid="uid://bgcrj76vkkg6s" path="res://scripts/turns_and_seasons.gd" id="1_5m4q6"]
[ext_resource type="PackedScene" uid="uid://dutxtsat7w2un" path="res://scenes/city.tscn" id="2_ne7uw"]
[ext_resource type="Texture2D" uid="uid://blly5ov4ih8mm" path="res://art/map.png" id="2_vsh3c"]
[ext_resource type="Script" uid="uid://dnpfvojfm741g" path="res://scripts/background_scaling.gd" id="3_jlqwp"]
[ext_resource type="Texture2D" uid="uid://dw2ksgj3y8ngd" path="res://art/parchment.png" id="4_parchment"]
[ext_resource type="StyleBox" uid="uid://p7nbonq4n65t" path="res://themes/button_style.tres" id="5_jlqwp"]
[ext_resource type="Script" uid="uid://cn1u4qb4srfwg" path="res://scripts/parchment_background.gd" id="5_parchment"]
[ext_resource type="Script" uid="uid://uyrt6sms65sr" path="res://scripts/EconomyManager.gd" id="9_raa3b"]
[ext_resource type="PackedScene" uid="uid://d4bslqs40km5x" path="res://scenes/StockUI.tscn" id="10_u73mt"]
[ext_resource type="PackedScene" uid="uid://dbum560abgpsd" path="res://scenes/player.tscn" id="11_f0c3g"]
[ext_resource type="Script" uid="uid://fmmff4hjpyih" path="res://scripts/random_event_manager.gd" id="11_od1u7"]
[ext_resource type="Script" uid="uid://b5jc87om2rw51" path="res://scripts/event_popup.gd" id="13_l1wjf"]

[node name="MapScene" type="Node2D"]
script = ExtResource("1_5m4q6")

[node name="Background" type="Sprite2D" parent="."]
position = Vector2(-1.0000007, 1.9999533)
scale = Vector2(0.89687496, 0.9027778)
texture = ExtResource("2_vsh3c")
script = ExtResource("3_jlqwp")

[node name="Cities" type="Node2D" parent="."]

[node name="Draugaholt" parent="Cities" instance=ExtResource("2_ne7uw")]
position = Vector2(-327, -260)
city_name = "Draugaholt"
icon_texture = ExtResource("1_0wcw4")

[node name="Yalanga" parent="Cities" instance=ExtResource("2_ne7uw")]
position = Vector2(275, 123)
city_name = "Yalanga"
biome = "warm"

[node name="Corvienne" parent="Cities" instance=ExtResource("2_ne7uw")]
position = Vector2(-236, -13)
city_name = "Corvienne"
biome = "coastal"

[node name="Tenzura" parent="Cities" instance=ExtResource("2_ne7uw")]
position = Vector2(385, -26)
city_name = "Tenzura"
biome = "steppe"

[node name="Meiyara" parent="Cities" instance=ExtResource("2_ne7uw")]
position = Vector2(-320, 158)
city_name = "Meiyara"
biome = "warm"

[node name="Camera2D" type="Camera2D" parent="."]

[node name="UI" type="CanvasLayer" parent="."]
layer = 10

[node name="EventPopup" type="Control" parent="UI" node_paths=PackedStringArray("title_label", "desc_label", "close_button")]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("13_l1wjf")
title_label = NodePath("UIStack/Title")
desc_label = NodePath("UIStack/Description")
close_button = NodePath("UIStack/CloseButton")

[node name="UIStack" type="VBoxContainer" parent="UI/EventPopup"]
layout_mode = 0
offset_left = 435.0
offset_top = 269.0
offset_right = 501.0
offset_bottom = 362.0
alignment = 1

[node name="Title" type="Label" parent="UI/EventPopup/UIStack"]
layout_mode = 2

[node name="Description" type="Label" parent="UI/EventPopup/UIStack"]
layout_mode = 2

[node name="CloseButton" type="Button" parent="UI/EventPopup/UIStack"]
layout_mode = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_colors/font_focus_color = Color(0, 0, 0, 1)
theme_override_colors/font_pressed_color = Color(0, 0, 0, 1)
theme_override_colors/font_hover_color = Color(0, 0, 0, 1)
theme_override_colors/font_hover_pressed_color = Color(0, 0, 0, 1)
theme_override_styles/normal = ExtResource("5_jlqwp")
text = "Close"
autowrap_trim_flags = 192
icon_alignment = 1

[node name="StockControl" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
grow_horizontal = 0

[node name="ParchmentBackground" type="TextureRect" parent="UI/StockControl"]
modulate = Color(0.729, 0.631, 0.467, 1)
layout_mode = 0
offset_left = -451.0
offset_top = -22.0
offset_right = 38.0
offset_bottom = 237.0
texture = ExtResource("4_parchment")
expand_mode = 1
script = ExtResource("5_parchment")
padding = 30.0

[node name="StockUIGrid" type="GridContainer" parent="UI/StockControl"]
layout_mode = 0
offset_left = -400.0
offset_top = 13.0
offset_bottom = 345.0
pivot_offset = Vector2(400, 1)
theme_override_constants/h_separation = 80
theme_override_constants/v_separation = 40
columns = 5

[node name="MoneyControl" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = 371.0
offset_top = 186.0
offset_right = 371.0
offset_bottom = 186.0
grow_horizontal = 0

[node name="Label" type="Label" parent="UI/MoneyControl"]
layout_mode = 0
offset_left = -534.99994
offset_top = -13.0
offset_right = -477.99994
offset_bottom = 10.0
scale = Vector2(1.3785383, 1.3785383)
theme_override_colors/font_color = Color(0, 0, 0, 1)
text = "Money:"

[node name="Control" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -10.0
offset_top = 89.0
offset_right = -10.0
offset_bottom = 89.0
grow_horizontal = 2
grow_vertical = 2

[node name="UIStack" type="VBoxContainer" parent="UI/Control"]
layout_mode = 1
anchors_preset = -1
offset_left = 1056.0
offset_top = 125.0
offset_right = 1150.0
offset_bottom = 191.0

[node name="EndTurnButton" type="Button" parent="UI/Control/UIStack"]
layout_mode = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_colors/font_focus_color = Color(0, 0, 0, 1)
theme_override_colors/font_pressed_color = Color(0, 0, 0, 1)
theme_override_colors/font_hover_color = Color(0, 0, 0, 1)
theme_override_colors/font_hover_pressed_color = Color(0, 0, 0, 1)
theme_override_styles/normal = ExtResource("5_jlqwp")
text = "End Turn"
autowrap_trim_flags = 192
icon_alignment = 1

[node name="TurnLabel" type="Label" parent="UI/Control/UIStack"]
layout_mode = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
text = "Turn: 0/3"
horizontal_alignment = 1
vertical_alignment = 1

[node name="ParchmentBackground" type="TextureRect" parent="UI/Control"]
visible = false
modulate = Color(0.729, 0.631, 0.467, 1)
layout_mode = 0
offset_left = -18.0
offset_right = 137.0
offset_bottom = 100.0
texture = ExtResource("4_parchment")
expand_mode = 1
stretch_mode = 5
script = ExtResource("5_parchment")
padding = 30.0

[node name="EconomyManager" type="Node" parent="." node_paths=PackedStringArray("UIGrid", "end_turn_button", "money_contorl")]
script = ExtResource("9_raa3b")
MapScenePath = NodePath("..")
stockUI = ExtResource("10_u73mt")
UIGrid = NodePath("../UI/StockControl/StockUIGrid")
end_turn_button = NodePath("../UI/Control/UIStack/EndTurnButton")
money_contorl = NodePath("../UI/MoneyControl")

[node name="RandomEventManager" type="Node" parent="EconomyManager"]
script = ExtResource("11_od1u7")

[node name="Player" parent="." instance=ExtResource("11_f0c3g")]

[connection signal="pressed" from="UI/EventPopup/UIStack/CloseButton" to="UI/EventPopup" method="_on_close_button_pressed"]
